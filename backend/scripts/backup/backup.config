# Trading Engine Backup Configuration
# Edit this file to configure backup behavior

# Backup storage
BACKUP_ROOT="/var/backups/trading-engine"
BACKUP_LOG_DIR="/var/log/trading-engine/backup"

# PostgreSQL configuration
DB_HOST="localhost"
DB_PORT="5432"
DB_NAME="trading_engine"
DB_USER="postgres"
DB_PASSWORD="${POSTGRES_PASSWORD}"  # Set in environment
PG_WAL_DIR="/var/lib/postgresql/data/pg_wal"
PG_DATA_DIR="/var/lib/postgresql/data"

# Redis configuration
REDIS_HOST="localhost"
REDIS_PORT="6379"
REDIS_RDB_PATH="/var/lib/redis/dump.rdb"
REDIS_AOF_PATH="/var/lib/redis/appendonly.aof"

# Application paths
APP_ROOT="/opt/trading-engine"
APP_CONFIG_DIR="/etc/trading-engine"
APP_DATA_DIR="/opt/trading-engine/data"
APP_LOG_DIR="/var/log/trading-engine"

# Encryption settings
ENABLE_ENCRYPTION="true"
GPG_RECIPIENT="backup@trading-engine.local"

# S3 configuration
ENABLE_S3="false"
S3_BUCKET="trading-engine-backups"
AWS_REGION="us-east-1"
AWS_PROFILE="default"

# Offsite backup
ENABLE_OFFSITE="false"
OFFSITE_HOST="backup@offsite.example.com"
OFFSITE_PATH="/backups/trading-engine"

# Verification
ENABLE_VERIFICATION="true"
TEST_DB_NAME="trading_engine_verify"

# Alerting
ALERT_EMAIL="ops@trading-engine.local"
ALERT_SLACK_WEBHOOK=""

# Retention policy (days)
RETENTION_DAILY=7
RETENTION_WEEKLY=4
RETENTION_MONTHLY=12

# Backup schedule
BACKUP_FULL_TIME="02:00"      # Daily full backup at 2 AM
BACKUP_INC_INTERVAL="4h"      # Incremental every 4 hours
BACKUP_VERIFY_INTERVAL="24h"  # Verify backups daily

# Performance tuning
BACKUP_NICE_LEVEL=19           # CPU priority (19 = lowest)
BACKUP_IONICE_CLASS=3          # I/O priority (3 = idle)
COMPRESSION_LEVEL=9            # gzip compression (9 = maximum)

# Monitoring
ENABLE_METRICS="true"
METRICS_PORT="9090"
PROMETHEUS_PUSHGATEWAY=""
